@{
    Layout = "_ContainerPageLayout";
}

@section Body
{
    <div class="d-flex flex-grow-1 flex-column gap-3 justify-content-center p-1">
        <div class="d-flex gap-3 justify-content-center">
            <div class="w-40 input">
                @(Html.When(JqueryBind.Change)
                      .OnSuccess(dsl => dsl.WithId("search").Trigger.None())
                      .AsHtmlAttributes(classes: "rounded search w-100 h-100", id: "search-input")
                      .ToInput(HtmlInputType.Text, ""))
                <span class="material-symbols-rounded addon-r">search</span>
            </div>
            @(Html.When(JqueryBind.Click)
                  .OnSuccess(dsl => dsl.WithId("search").Trigger.None())
                  .AsHtmlAttributes(classes: "btn btn-light")
                  .ToButton(DataResources.Continue))
        </div>
        @(Html.When(JqueryBind.None)
              .StopPropagation()
              .Ajax(o =>
              {
                  o.Global = false;
                  o.Url = Url.Dispatcher().Query(new GetExportSearchQuery
                  {
                      Search = Selector.Jquery.Id("search-input")
                  }).AsJson();
              })
              .OnSuccess(dsl => dsl.Self().Insert.WithTemplateByView("~/Views/Export/Tmpl/Search_Tmpl.cshtml").Html())
              .AsHtmlAttributes(classes: "d-flex flex-column", id: "search")
              .ToDiv())
    </div>

}
